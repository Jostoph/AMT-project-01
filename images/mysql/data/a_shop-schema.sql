SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

DROP SCHEMA IF EXISTS shop;
CREATE SCHEMA shop;
USE shop;

--
-- Table structure for ENTITY `client`
--

CREATE TABLE client (
  client_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
  username VARCHAR(45) NOT NULL,
  email VARCHAR(50) NOT NULL,
  password VARCHAR(60) NOT NULL,
  PRIMARY KEY  (client_id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;
--
-- Table structure for ENTITY `product`
--

CREATE TABLE product (
  product_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(25) NOT NULL,
  price FLOAT NOT NULL,
  origin VARCHAR(25) NOT NULL,
  description TEXT NOT NULL, 
  PRIMARY KEY  (product_id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Table structure for ENTITY `order`
--

CREATE TABLE clientOrder (
  order_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
  client_id INT UNSIGNED NOT NULL,
  date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY  (order_id),
  FOREIGN KEY (client_id) REFERENCES client (client_id) ON DELETE RESTRICT ON UPDATE CASCADE
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Table structure for ENTITY/RELATION `orderLine`
--

CREATE TABLE orderLine (
  product_id INT UNSIGNED NOT NULL,
  order_id INT UNSIGNED NOT NULL,
  quantity INT UNSIGNED DEFAULT 1,
  PRIMARY KEY  (product_id,order_id),
  FOREIGN KEY (product_id) REFERENCES product (product_id) ON DELETE RESTRICT ON UPDATE CASCADE,
  FOREIGN KEY (order_id) REFERENCES clientOrder (order_id) ON DELETE RESTRICT ON UPDATE CASCADE

)ENGINE=InnoDB DEFAULT CHARSET=utf8;